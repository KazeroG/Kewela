{% if section.settings.default_navigation != blank %}
    {% if linklists[section.settings.default_navigation].links.size > 0 %}
        <ul class="mmenu mmenu-js {% if section.settings.icon_small_space %}mmenu--compact{% endif %} {% if settings.menu_active_lined %}mmenu--link-lined{% endif %}">
            {% for link in  linklists[section.settings.default_navigation].links %}
                <li class="mmenu-item--simple title-{{ link.title | handle }}">
                    <a href="{{ link.url }}" class="{% if link.active or link.child_active %}active{% endif %} {% unless settings.menu_uppercase %}no-uppercase{% endunless %}"><span>{% include 'title' link:link %}</span></a>
                    {% if linklists[link.handle].links.size > 0 %}
                        <div class="mmenu-submenu">
                            <ul class="submenu-list">
                                {% for link_1 in linklists[link.handle].links %}
                                    <li>
                                        <a href="{{ link_1.url }}" {% if link_1.active or link_1.child_active %}class="active"{% endif %}>{% include 'title' link:link_1 %}</a>
                                        {% if linklists[link_1.handle].links.size > 0 %}
                                            <ul>
                                                {% for link_2 in linklists[link_1.handle].links %}
                                                    <li>
                                                        <a href="{{ link_2.url }}" {% if link_2.active or link_2.child_active %}class="active"{% endif %}>{% include 'title' link:link_2 %}</a>
                                                        {% if linklists[link_2.handle].links.size > 0 %}
                                                            <ul>
                                                                {% for link_3 in linklists[link_2.handle].links %}
                                                                    <li><a href="{{ link_3.url }}" {% if link_3.active or link_3.child_active %}class="active"{% endif %}>{% include 'title' link:link_3 %}</a> </li>
                                                                {% endfor %}
                                                            </ul>
                                                        {% endif %}
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% else if section.blocks.size > 0 %}
    <ul class="mmenu mmenu-js {% if section.settings.icon_small_space %}mmenu--compact{% endif %} {% if settings.menu_active_lined %}mmenu--link-lined{% endif %}">
        {% for block in section.blocks %}
            {% if block.settings.enable %}
                <li class="mmenu-item--{% case block.type %}{% when 'tree' %}simple{% when 'tree_double' %}simple{% when 'columns' %}mega{% when 'shop_by' %}mega{% endcase %} title-{{ block.settings.title | handle }} {{ block.settings.enable_device }}">
                    <a {% if block.settings.link != blank %}href="{{ block.settings.link }}"{% endif %} {% unless settings.menu_uppercase %}class="no-uppercase"{% endunless %}><span>{% include 'title_2' %}</span></a>
                    {% case block.type %}
                    {% when 'tree' %}
                        {% assign list = block.settings.dropdown_list %}
                        {% if list != blank %}
                            <div class="mmenu-submenu">
                                <ul class="submenu-list">
                                    {% for link in  linklists[list].links %}
                                        {% include 'navigation-tree-childrens' %}
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                    {% when 'tree_double' %}
                        {% assign list = block.settings.dropdown_list %}
                        {% assign list_2 = block.settings.dropdown_list_2 %}
                        {% if list != blank or list_2 != blank %}
                            <div class="mmenu-submenu d-flex">
                                {%- if list != blank -%}
                                    <ul class="submenu-list mt-0">
                                        {% for link in  linklists[list].links %}
                                            {% include 'navigation-tree-childrens' %}
                                        {% endfor %}
                                    </ul>
                                {%- endif -%}
                                {%- if list_2 != blank -%}
                                    <ul class="submenu-list mt-0">
                                        {% for link in  linklists[list_2].links %}
                                            {% include 'navigation-tree-childrens' %}
                                        {% endfor %}
                                    </ul>
                                {%- endif -%}
                            </div>
                        {% endif %}
                    {% when 'columns' %}
                        <div class="mmenu-submenu mmenu-submenu-with-sublevel {% if block.settings.btm_row_yes and block.settings.btm_row_html != blank %}mmenu-submenu--has-bottom{% endif %}">
                        <div class="mmenu-submenu-inside">
                            <div class="container">
                                {% if block.settings.left_col_yes %}
                                    <div class="mmenu-left width-{{ block.settings.left_col_html_width }}">
                                        <div class="mmenu-bnr-wrap image-hover-dark">
                                            <a class="image-hover-scale" {% if block.settings.left_col_link != blank %}href="{{ block.settings.left_col_link }}"{% endif %}>
                                                {%- if block.settings.left_col_image != blank -%}
                                                    {%- assign aspect_ratio = 1 | divided_by: block.settings.left_col_image.aspect_ratio -%}
                                                    <div class="image-container w-100" style="padding-bottom: {{ aspect_ratio | times: 100 }}%">
                                                        <img class="lazyload fade-up"
                                                             data-src="{{ block.settings.left_col_image | img_url:'412x' }}"
                                                             data-srcset="{{ block.settings.left_col_image | img_url:'412x' }} 1x, {{ block.settings.left_col_image | img_url:'412x', scale:1.5 }} 2x"
                                                             alt="{{ section.settings.image.alt | escape }}">
                                                    </div>
                                                {%- else -%}
                                                    {% include 'image-placeholder' size: '412x434' %}
                                                {%- endif -%}
                                            </a>
                                        </div>
                                        <h3 class="submenu-title"><a {% if block.settings.left_col_link != blank %}href="{{ block.settings.left_col_link }}"{% endif %}>{{ block.settings.left_col_text }}</a></h3>
                                    </div>
                                {% endif %}
                                {% if block.settings.right_col_yes %}
                                    <div class="mmenu-right width-{{ block.settings.right_col_html_width }}">
                                        <div class="mmenu-bnr-wrap image-hover-dark">
                                            <a class="image-hover-scale" {% if block.settings.right_col_link != blank %}href="{{ block.settings.right_col_link }}"{% endif %}>
                                            {%- if block.settings.right_col_image != blank -%}
                                                {%- assign img_url = block.settings.right_col_image | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
                                                {%- assign aspect_ratio = 1 | divided_by: block.settings.right_col_image.aspect_ratio -%}
                                                <div class="image-container w-100" style="padding-bottom: {{ aspect_ratio | times: 100 }}%">
                                                    <img class="lazyload fade-up"
                                                         data-src="{{ img_url }}"
                                                         data-src="{{ block.settings.right_col_image | img_url:'412x' }}"
                                                         data-srcset="{{ block.settings.right_col_image | img_url:'412x' }} 1x, {{ block.settings.right_col_image | img_url:'412x', scale:1.5 }} 2x"
                                                         alt="{{ section.settings.image.alt | escape }}">
                                                </div>
                                            {%- else -%}
                                                {% include 'image-placeholder' size: '379x390' %}
                                            {%- endif -%}
                                            </a>
                                        </div>
                                        <h3 class="submenu-title"><a {% if block.settings.right_col_link != blank %}href="{{ block.settings.right_col_link }}"{% endif %}>{{ block.settings.right_col_text }}</a></h3>
                                    </div>
                                {% endif %}
                                <div class="mmenu-cols column-{{ block.settings.columns_in_row }}">
                                    {% for i in (1..15) %}
                                        {% capture enable %}nav_col_{{ i }}_yes{% endcapture %}
                                        {% capture preview %}nav_col_{{ i }}_preview{% endcapture %}
                                        {% capture title %}nav_col_{{ i }}_title{% endcapture %}
                                        {% capture link %}nav_col_{{ i }}_link{% endcapture %}
                                        {% capture list %}nav_col_{{ i }}_list{% endcapture %}{% assign list = block.settings[list] %}
                                        {% if block.settings[enable] %}
                                            <div class="mmenu-col">
                                                {% if block.settings[title] != blank %} <h3 class="submenu-title"><a {% if block.settings[link] != blank %}href="{{ block.settings[link] }}"{% endif %}>{{  block.settings[title] }}</a></h3> {% endif %}
                                                {% if list != blank %}
                                                    <ul class="submenu-list">
                                                        {% for link in  linklists[list].links %}
                                                            <li>
                                                                {% assign title = link.title | split:'::' %}
                                                                {%- assign link_url = link.url -%}
                                                                <a href="{{ link_url }}">{{ title | first }}{% if title[1] != blank %}<span class="menu-label" style="background-color:#{{ title[1] | split:'#' | last }}">{{ title[1] | split:'#' | first }}</span>{% endif %}{% if title[2] != blank %}<span class="submenu-link-txt">{{ title[2] }}</span>{% endif %}</a>
                                                                {% if linklists[link.handle].links.size > 0 %}
                                                                    <ul class="sub-level">
                                                                        {% for link_1 in linklists[link.handle].links %}
                                                                            <li>
                                                                                {%- assign link_url_1 = link_1.url -%}
                                                                                <a href="{{ link_url_1 }}"> {% include 'title_3' link:link_1 %} </a>
                                                                                {% if linklists[link_1.handle].links.size > 0 %}
                                                                                    <ul class="sub-level">
                                                                                        {% for link_2 in linklists[link_1.handle].links %}
                                                                                            <li><a href="{{ link_2.url }}"> {% include 'title_3' link:link_2 %} </a> </li>
                                                                                        {% endfor %}
                                                                                    </ul>
                                                                                {% endif %}
                                                                            </li>
                                                                        {% endfor %}
                                                                    </ul>
                                                                {% endif %}
                                                            </li>
                                                        {% endfor %}
                                                    </ul>
                                                {% endif %}
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                    {% if block.settings.btm_row_yes and block.settings.btm_row_html != blank %}
                                        <div class="mmenu-bottom justify-content-center heading-font">
                                            {{ block.settings.btm_row_html }}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endcase %}
                </li>
            {% endif %}
        {% endfor %}
    </ul>
{% endif %}