{%- assign collection_1 = collections[section.settings.collection_1] -%}
{% if section.settings.limit_1 != blank %}
    {%- assign product_limit_1 = section.settings.limit_1 -%}
{% endif %}
<div class="holder {{ section.settings.outer_margin }} {%- if section.settings.enable_bg -%}holder-with-bg {{ section.settings.padding-t }} {{ section.settings.padding-b }}  bg-cover lazyload" data-expand="-500"
        {%- if section.settings.bg_image != blank -%}data-bgset="{% include 'bgset', image: section.settings.bg_image %}" data-sizes="auto"{%- endif -%}
        {%- if section.settings.bg_color != blank and section.settings.bg_color != 'rgba(0,0,0,0)' -%}style="background-color: {{ section.settings.bg_color }}"{%- endif -%}
        {%- else -%}"{%- endif -%}>
    <div class="container">
        {% include 'section-headings', class: 'd-sm-none' %}
        <div class="row flex-nowrap">
            <div class="col-14 col-sm-11 col-md-13 right-carousel">
                {% include 'section-headings', class: 'd-none d-sm-block' %}
                <div class="prd-grid prd-carousel js-prd-carousel-dots data-to-show-{{ section.settings.per_row_desktop }} data-to-show-md-2 data-to-show-sm-2 data-to-show-xs-{{ section.settings.per_row_mobile }}">
                    {% for product in collection_1.products limit: product_limit_1 %}{% include 'product-card' %}{% else %}{% include 'empty-carousel' %}{% endfor %}
                </div>
            </div>
                {%- assign _img = section.settings.image -%}
                {%- if _img -%}
                {%- assign aspect_ratio = 1 | divided_by: _img.aspect_ratio -%}
                <div class="col-4 col-sm-7 col-md-5 right-carousel-image">
                {%- assign img_url = _img | img_url: '540x' -%}
                <img class="lazyload fade-up"
                     data-src="{{ img_url }}"
                     alt="">
                </div>
                {%- else -%}
                    {% include 'image-placeholder-aspect-ratio', width: 200, height: 100 %}
                {%- endif -%}
        </div>
    </div>
</div>

{% schema %}
{
"name": "Product Carousel + Image",
"class": "index-section",
"presets": [
{
"name": "Products Carousel + Image",
"category": "Products"
}
],
"settings": [
{
"type": "header",
"content": "Layout"
},
{
"type": "select",
"id": "outer_margin",
"label": "Outer top margin",
"options":[
{"value":"mt-0","label":"None"},
{"value":"holder-mt-xsmall","label":"XSmall"},
{"value":"holder-mt-small","label":"Small"},
{"value":"holder-mt-medium","label":"Medium (default)"},
{"value":"holder-mt-large","label":"Large"}
],
"default": "holder-mt-medium"
},
    {
    "type": "checkbox",
    "id": "enable_bg",
    "label": "Add background",
    "default": false
    },
    {
    "type": "select",
    "id": "padding-t",
    "label": "Top Padding",
    "options":[
    {"value":"pt-0","label":"None"},
    {"value":"holder-pt-xsmall","label":"XSmall"},
    {"value":"holder-pt-small","label":"Small"},
    {"value":"holder-pt-medium","label":"Medium (default)"},
    {"value":"holder-pt-large","label":"Large"}
    ],
    "default": "holder-pt-medium"
    },
{
"type": "select",
"id": "padding-b",
"label": "Bottom Padding",
"options":[
{"value":"pb-0","label":"None"},
{"value":"holder-pb-xsmall","label":"XSmall"},
{"value":"holder-pb-small","label":"Small"},
{"value":"holder-pb-medium","label":"Medium (default)"},
{"value":"holder-pb-large","label":"Large"}
],
"default": "holder-pb-medium"
},
    {
    "type":"color",
    "id":"bg_color",
    "label":"Section Background Color",
    "default":"#f8f8f8"
    },
    {
    "type": "header",
    "content": "Heading"
    },
    {
    "type": "checkbox",
    "id": "enable_text",
    "label": "Enable",
    "default": true
    },
    {
    "type": "text",
    "id": "title",
    "label": "Title",
    "default":"Heading"
    },
    {
    "type": "select",
    "id": "title_size",
    "label": "Title Font Size",
    "default": "h2-style",
    "options": [
    { "value": "h-lg-style", "label": "Large" },
    { "value": "h1-style", "label": "Normal" },
    { "value": "h2-style", "label": "Small" }
    ]
    },
    {
    "type": "select",
    "id": "text_alignment",
    "label": "Text Alignment",
    "default": "center",
    "options": [
    { "value": "left", "label": "Left" },
    { "value": "center", "label": "Center" },
    { "value": "right", "label": "Right" }
    ]
    },
    {
    "type": "text",
    "id": "subtitle",
    "label": "Sub Heading"
    },
    {
    "type": "text",
    "id": "bgtitle",
    "label": "Background Heading"
    },
    {
    "type": "header",
    "content": "General"
    },
{
   "type":      "paragraph",
   "content":   "Collection 1"
},
{
"id": "collection_1",
"type": "collection",
"label": "Collection"
},
    {
    "id": "limit",
    "type": "text",
    "label": "Products limit",
    "default":"8"
    },
    {
    "type": "select",
    "id": "per_row_desktop",
    "label": "Desktop:",
    "default": "4",
    "options": [
    { "value": "3", "label": "3" },
    { "value": "4", "label": "4" },
    { "value": "5", "label": "5" },
    { "value": "6", "label": "6" }
    ],
    "info": "products per row"
    },
    {
    "type": "select",
    "id": "per_row_mobile",
    "label": "Mobile:",
    "default": "1",
    "options": [
    { "value": "1", "label": "1" },
    { "value": "2", "label": "2" }
    ],
    "info": "products per row"
    },
{
"type": "header",
"content": "Image"
},
{
"type":"image_picker",
"id":"image",
"label":"Image"
}
]
}
{% endschema %}