{%- if section.settings.enable -%}
    <div class="holder {{ section.settings.outer_margin }}">
        <div class="container">
            {% include 'section-headings' %}
            <ul class="brand-carousel js-brand-carousel slick-arrows-aside-simple {% if section.settings.grey_image %}brand--grey-img{% endif %}"
            data-slick='{"slidesToShow": {{ section.settings.per_row_desktop }}, {% if section.settings.arrows %}"arrows": true,{% endif %} {% unless section.settings.autoplay %}"autoplay": false,{% endunless %} "responsive": [{"breakpoint": 992,"settings": {"slidesToShow": {{ section.settings.per_row_tablet }} }},{"breakpoint": 480,"settings": {"slidesToShow": {{ section.settings.per_row_mobile }} }}]}'>
                {%- for block in section.blocks -%}
                    {%- if block.settings.enable -%}
                        <li {{ block.shopify_attributes }}>
                            {%- if block.settings.link == blank -%}
                                <div>
                                    {%- if block.settings.image == blank -%}
                                        {% include 'image-placeholder' size: 'brand' width: '120' height: '100' nosvg: true %}
                                    {%- else -%}
                                        <img class="lazyload lazypreload"
                                             data-src="{{ block.settings.image | img_url: '500x' }}"
                                             data-aspectratio="2"
                                             data-sizes="auto"
                                             alt="{{ block.settings.name | escape }}">
                                    {%- endif -%}
                                </div>
                            {%- else  -%}
                                <a href="{{ block.settings.link }}" target="{{ block.settings.link_target }}"  title="{{ block.settings.name }}">
                                    {%- if block.settings.image == blank -%}
                                        {% include 'image-placeholder' size: 'brand' width: '120' height: '100' nosvg: true %}
                                    {%- else -%}
                                        <img class="lazyload lazypreload"
                                             data-src="{{ block.settings.image | img_url: '500x' }}"
                                             data-aspectratio="2"
                                             data-sizes="auto"
                                             alt="{{ block.settings.name | escape }}">
                                    {%- endif -%}
                                </a>
                            {%- endif -%}
                        </li>
                    {%- endif -%}
                {%- endfor -%}
            </ul>
        </div>
    </div>
{%- endif -%}

{% schema %}
{
"name": "Brands Carousel",
"settings": [
    {
        "type": "checkbox",
        "id": "enable",
        "label": "Enable",
        "default": true
    },
    {
        "type": "header",
        "content": "Layout"
    },
    {
        "type": "select",
        "id": "outer_margin",
        "label": "Outer top margin",
        "options":[
            {"value":"mt-0","label":"None"},
            {"value":"holder-mt-xsmall","label":"XSmall"},
            {"value":"holder-mt-small","label":"Small"},
            {"value":"holder-mt-medium","label":"Medium (default)"},
            {"value":"holder-mt-large","label":"Large"}
        ],
        "default": "holder-mt-medium"
    },
    {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay Carousel",
        "default": true
    },
    {
        "type": "checkbox",
        "id": "arrows",
        "label": "Show Arrows",
        "default": false
    },
    {
        "type": "checkbox",
        "id": "grey_image",
        "label": "Discolor images",
        "default": false
    },
    {
        "type": "header",
        "content": "Heading"
    },
    {
        "type": "checkbox",
        "id": "enable_text",
        "label": "Enable",
        "default": false
    },
    {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default":"Brands"
    },
    {
        "type": "select",
        "id": "title_size",
        "label": "Title Font Size",
        "default": "h1-style",
        "options": [
            { "value": "h-lg-style", "label": "Large" },
            { "value": "h1-style", "label": "Normal" },
            { "value": "h2-style", "label": "Small" }
        ]
    },
    {
    "type": "text",
    "id": "subtitle",
    "label": "Sub Heading",
    "default": "Sub Heading"
    },
    {
    "type": "text",
    "id": "bgtitle",
    "label": "Background Heading"
    },
    {
        "type": "select",
        "id": "text_alignment",
        "label": "Text Alignment",
        "default": "center",
        "options": [
            { "value": "left", "label": "Left" },
            { "value": "center", "label": "Center" },
            { "value": "right", "label": "Right" }
        ]
    },
    {
    "type": "header",
    "content": "Brands per row"
    },
    {
    "type": "select",
    "id": "per_row_desktop",
    "label": "Desktop:",
    "default": "8",
    "options": [
    { "value": "8", "label": "8" },
    { "value": "7", "label": "7" },
    { "value": "6", "label": "6" },
    { "value": "5", "label": "5" },
    { "value": "4", "label": "4" },
    { "value": "3", "label": "3" }
    ]
    },
    {
    "type": "select",
    "id": "per_row_tablet",
    "label": "Tablet:",
    "default": "5",
    "options": [
    { "value": "6", "label": "6" },
    { "value": "5", "label": "5" },
    { "value": "4", "label": "4" },
    { "value": "3", "label": "3" }
    ]
    },
    {
    "type": "select",
    "id": "per_row_mobile",
    "label": "Mobile:",
    "default": "2",
    "options": [
    { "value": "3", "label": "3" },
    { "value": "2", "label": "2" },
    { "value": "1", "label": "1" }
    ]
    }
],
"blocks": [
    {
    "type": "brand",
    "name": "Brand",
    "settings": [
        {
            "type": "image_picker",
            "id": "image",
            "label": "Image",
            "info":"Recommended size 300x150px"
        },
        {
            "type":"checkbox",
            "id":"enable",
            "label":"Enable",
            "default":true
        },
        {
            "type": "text",
            "id": "name",
            "label": "Name",
            "default": "Brand"
        },
        {
            "type": "url",
            "id": "link",
            "label": "Brand link"
        },
        {
            "type": "select",
            "id": "link_target",
            "label": "Link Target",
            "default":"_self",
            "options": [
                { "value": "_blank", "label": "New page" },
                { "value": "_self",  "label": "In current page" }
            ]
        }
    ]}
],
"presets": [{
    "name": "Brands Carousel",
    "category": "Brands",
    "blocks": [
        {
           "type": "brand"
        },
        {
           "type": "brand"
        },
        {
          "type": "brand"
        },
        {
            "type": "brand"
        },
        {
            "type": "brand"
        },
        {
            "type": "brand"
        },
        {
            "type": "brand"
        }
    ]
}]
}
{% endschema %}