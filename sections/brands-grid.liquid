{%- if section.settings.enable -%}
    {%- assign max_mobile = section.settings.max_mobile | times: 1 -%}
    <div class="holder {{ section.settings.outer_margin }}">
        <div class="container">
            {% include 'section-headings' %}
            <ul class="brand-grid flex-wrap justify-content-{{ section.settings.brand_alignment }} js-color-hover-brand-grid">
                {%- for block in section.blocks -%}
                    {%- if block.settings.enable -%}
                        <li {{ block.shopify_attributes }} {% if forloop.index > max_mobile %}class="visuallyhidden js-hidden"{% endif %}>
                            {%- if block.settings.image == blank -%}
                                {% include 'image-placeholder' size: 'brand' width: '320' height: '160' nosvg: true %}
                            {%- else -%}
                                {%- assign aspect_ratio = 1 | divided_by: block.settings.image.aspect_ratio -%}
                                {%- if block.settings.link == blank -%}
                                    <div class="image-container" title="{{ block.settings.name }}" style="padding-bottom: calc({{ aspect_ratio | times: 100 }}% + 30px)">
                                        <img class="lazyload fade-up"
                                             data-src="{{ block.settings.image | img_url: '500x' }}"
                                             alt="{{ block.settings.name | escape }}">
                                    </div>
                                {%- else -%}
                                    <a href="{{ block.settings.link }}" target="{{ block.settings.link_target }}" class="d-block image-container" title="{{ block.settings.name }}" style="padding-bottom: calc({{ aspect_ratio | times: 100 }}% + 30px)">
                                        <img class="lazyload fade-up"
                                             data-src="{{ block.settings.image | img_url: '500x' }}"
                                             alt="{{ block.settings.name | escape }}">
                                    </a>
                                {%- endif -%}
                            {%- endif -%}
                        </li>
                    {%- endif -%}
                {%- endfor -%}
            </ul>
            <div class="text-center mt-3 d-md-none {% if block.size <= max_mobile %}d-none{% endif %}">
                <a href="#" class="btn btn--sm btn--grey brands-show-more js-brands-show-more"><span>{{ 'general.filters.show_more' | t }}</span><span>{{ 'general.filters.show_less' | t }}</span></a>
            </div>
        </div>
    </div>
    <style>
        .brand-grid li {
            flex: 0 0 {{ 100.0 | divided_by: section.settings.per_row_desktop | round: 3 }}%;
            max-width: {{ 100.0 | divided_by: section.settings.per_row_desktop | round: 3 }}%;
        }

        .brands-show-more span:last-child {
            display: none;
        }

        .brands-show-more.showLess span:first-child {
            display: none;
        }
        .brands-show-more.showLess span:last-child {
            display: block;
        }

        @media (max-width: 991px) {
            .brand-grid li {
                flex: 0 0 {{ 100.0 | divided_by: section.settings.per_row_tablet | round: 3 }}%;
                max-width: {{ 100.0 | divided_by: section.settings.per_row_tablet | round: 3 }}%;
            }
        }

        @media (max-width: 575px) {
            .brand-grid li {
                flex: 0 0 {{ 100.0 | divided_by: section.settings.per_row_mobile | round: 3 }}%;
                max-width: {{ 100.0 | divided_by: section.settings.per_row_mobile | round: 3 }}%;
            }
        }
    </style>
{%- endif -%}

{% schema %}
{
"name": "Brands Grid",
"settings": [
{
"type": "checkbox",
"id": "enable",
"label": "Enable",
"default": true
},
{
"type": "header",
"content": "Layout"
},
{
"type": "select",
"id": "outer_margin",
"label": "Outer top margin",
"options":[
{"value":"mt-0","label":"None"},
{"value":"holder-mt-xsmall","label":"XSmall"},
{"value":"holder-mt-small","label":"Small"},
{"value":"holder-mt-medium","label":"Medium (default)"},
{"value":"holder-mt-large","label":"Large"}
],
"default": "holder-mt-medium"
},
{
"type": "checkbox",
"id": "autoplay",
"label": "Autoplay Carousel",
"default": true
},
{
"type": "checkbox",
"id": "grey_image",
"label": "Discolor images",
"default": false
},
{
"type": "header",
"content": "Heading"
},
{
"type": "checkbox",
"id": "enable_text",
"label": "Enable",
"default": false
},
{
"type": "text",
"id": "title",
"label": "Title",
"default":"Brands"
},
{
"type": "select",
"id": "title_size",
"label": "Title Font Size",
"default": "h1-style",
"options": [
{ "value": "h-lg-style", "label": "Large" },
{ "value": "h1-style", "label": "Normal" },
{ "value": "h2-style", "label": "Small" }
]
},
    {
    "type": "text",
    "id": "subtitle",
    "label": "Sub Heading",
    "default": "Sub Heading"
    },
    {
    "type": "text",
    "id": "bgtitle",
    "label": "Background Heading"
    },
{
"type": "select",
"id": "text_alignment",
"label": "Text Alignment",
"default": "center",
"options": [
{ "value": "left", "label": "Left" },
{ "value": "center", "label": "Center" },
{ "value": "right", "label": "Right" }
]
},
{
"type": "select",
"id": "brands_alignment",
"label": "Brands Alignment",
"default": "center",
"options": [
{ "value": "start", "label": "Left" },
{ "value": "center", "label": "Center" },
{ "value": "end", "label": "Right" }
]
},
{
"type": "header",
"content": "Brands per row"
},
{
"type": "select",
"id": "per_row_desktop",
"label": "Desktop:",
"default": "8",
"options": [
{ "value": "8", "label": "8" },
{ "value": "7", "label": "7" },
{ "value": "6", "label": "6" },
{ "value": "5", "label": "5" },
{ "value": "4", "label": "4" },
{ "value": "3", "label": "3" }
]
},
{
"type": "select",
"id": "per_row_tablet",
"label": "Tablet:",
"default": "5",
"options": [
{ "value": "6", "label": "6" },
{ "value": "5", "label": "5" },
{ "value": "4", "label": "4" },
{ "value": "3", "label": "3" }
]
},
{
"type": "select",
"id": "per_row_mobile",
"label": "Mobile:",
"default": "2",
"options": [
{ "value": "3", "label": "3" },
{ "value": "2", "label": "2" },
{ "value": "1", "label": "1" }
]
},
{
"type": "text",
"id": "max_mobile",
"label": "Maximum for mobile ",
"default": "4"
}
],
"blocks": [
{
"type": "brand",
"name": "Brand",
"settings": [
{
"type": "image_picker",
"id": "image",
"label": "Image",
"info":"Recommended size 300x150px"
},
{
"type":"checkbox",
"id":"enable",
"label":"Enable",
"default":true
},
{
"type": "text",
"id": "name",
"label": "Name",
"default": "Brand"
},
{
"type": "url",
"id": "link",
"label": "Brand link"
},
{
"type": "select",
"id": "link_target",
"label": "Link Target",
"default":"_self",
"options": [
{ "value": "_blank", "label": "New page" },
{ "value": "_self",  "label": "In current page" }
]
}
]}
],
"presets": [{
"name": "Brands Grid",
"category": "Brands",
"blocks": [
{
"type": "brand"
},
{
"type": "brand"
},
{
"type": "brand"
},
{
"type": "brand"
},
{
"type": "brand"
},
{
"type": "brand"
},
{
"type": "brand"
}
]
}]
}
{% endschema %}